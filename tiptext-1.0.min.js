function Tiptext(e){function p(e){e.addEventListener("mouseover",m);e.addEventListener("mouseout",y);if(typeof e.tiptext_settings=="undefined")e.tiptext_settings={};var n=e.tiptext_settings;n.has_event_listener=true;if(typeof n.show_delay=="undefined")n.show_delay=t.show_delay;if(typeof n.hide_delay=="undefined")n.hide_delay=t.hide_delay;if(typeof n.stick_delay=="undefined")n.stick_delay=t.stick_delay;if(typeof n.base_className=="undefined")n.base_className=t.base_className;if(typeof n.className=="undefined")n.className="";if(!("show_start"in n)){if(typeof t.show_start!="undefined")n.show_start=t.show_start}if(!("show_process"in n)){if(typeof t.show_process!="undefined")n.show_process=t.show_process}if(!("show_end"in n)){if(typeof t.show_end!="undefined")n.show_end=t.show_end}if(!("hide_start"in n)){if(typeof t.hide_start!="undefined")n.hide_start=t.hide_start}if(!("hide_process"in n)){if(typeof t.hide_process!="undefined")n.hide_process=t.hide_process}if(!("hide_end"in n)){if(typeof t.hide_end!="undefined")n.hide_end=t.hide_end}if(typeof n.show_process_timeout_time=="undefined"){if(typeof t.show_process_timeout_time!="undefined")n.show_process_timeout_time=t.show_process_timeout_time}if(typeof n.hide_process_timeout_time=="undefined"){if(typeof t.hide_process_timeout_time!="undefined")n.hide_process_timeout_time=t.hide_process_timeout_time}}function d(e){if(typeof t.current_process_timeout!="undefined"){clearTimeout(t.current_process_timeout);t.current_process_timeout=undefined}f=undefined}function v(e,n,r){function h(){if(c!=-1)l+=n=="show"?u:-u;if(n=="hide"&&l<0||n=="show"&&l>1){c=a}if(c==a){p();return}f(t,l);c+=1;t.current_process_timeout=setTimeout(h,s)}function p(){if(n=="hide"){if(l<0)l=0}else{if(l>1)l=1}f(t,l);r()}var i=e.tiptext_settings;f=i[n+"_process"];if(typeof f=="undefined")return;if(l>1)l=1;if(l<0)l=0;var s=i[n+"_process_timeout_time"];var o=i[n+"_delay"];var u=o!=0?s/o:1;var a=o!=0?parseInt(o/s):1;a=Math.floor(a*(n=="show"?1-l:l));if(a==0){p();return}var c=-1;h()}function y(e){if(e.currentTarget.contains(e.relatedTarget))return;g()}function w(e){if(e instanceof Event==false&&typeof e.x!="undefined"&&typeof e.y!="undefined"&&typeof e.target!="undefined"){var t=[e.x,e.y]}else{if(i==null)return;var t=N(e,r)}s.style.left=t[0]+"px";s.style.top=t[1]+"px"}function E(e){var t=e.getAttribute(n);if(t==null||t=="")return;if(typeof e.tiptext_settings=="undefined"||typeof e.tiptext_settings.has_event_listener=="undefined"){p(e)}}function T(){x.observe(r,{attributes:true,childList:true,subtree:true,attributeFilter:[n]});if(c==true){E(r);var e=r.querySelectorAll("*["+n+"]");for(var t=0,i=e.length;t<i;t++){E(e[t])}}}function N(e,t){if(typeof t=="undefined")t=e.target;if(typeof e.pageX!="undefined"){var n=C(t);return[e.pageX-n[0],e.pageY-n[1]]}if(typeof e.offsetX!="undefined")return[e.offsetX,e.offsetY];if(typeof e.layerY!="undefined")return[e.layerX,e.layerY]}function C(e,t){var n=0,r=0,i=0,s=0,o=0;if(typeof t=="undefined")t=null;do{if(e.offsetParent==t){i=1;s=1}else{i=k(e.offsetParent,{transform_type:"scale",xy:"x"});s=k(e.offsetParent,{transform_type:"scale",xy:"y"})}o=parseFloat(getComputedStyle(e).borderLeftWidth);if(!isNaN(o))n+=o*i;o=parseFloat(getComputedStyle(e).borderTopWidth);if(!isNaN(o))r+=o*s;if(e.offsetParent==t)return[n,r];n+=e.offsetLeft*i;r+=e.offsetTop*s;e=e.offsetParent}while(true)}function k(e,t){function u(){var t=window.getComputedStyle(e)["Transform"];if(typeof t=="undefined"){t=window.getComputedStyle(e)["msTransform"]}if(typeof t=="undefined"){t=window.getComputedStyle(e)["webkitTransform"]}if(typeof t=="undefined"){t=window.getComputedStyle(e)["MozTransform"]}if(typeof t=="undefined"){t=window.getComputedStyle(e)["OTransform"]}if(typeof t=="undefined"||t=="none")return false;return t}var n=t.transform_type;var r=t.xy;var i="";var s=[];switch(n){case"scale":var o=1;while(true){i=u();if(i!=false){s=i.slice(7,i.length-6).split(",");switch(r){case"x":o*=parseFloat(s[0]);break;case"y":o*=parseFloat(s[3]);break}}var e=e.parentNode;if(e.parentNode==null)break}return o}}var t={};if(typeof e=="undefined")e={};var n=typeof e.attribute_name!="undefined"?e.attribute_name:"tiptext";var r=typeof e.parent!="undefined"?e.parent:document.body;t.base_className=typeof e.base_className!="undefined"?e.base_className:n;t.show_delay=typeof e.show_delay!="undefined"?e.show_delay:400;t.hide_delay=typeof e.hide_delay!="undefined"?e.hide_delay:200;t.stick_delay=typeof e.stick_delay!="undefined"?e.stick_delay:500;t.show_start="show_start"in e?e.show_start:function(e){e.tipdiv.style.opacity=1};t.show_process="show_process"in e?e.show_process:undefined;t.show_end="show_end"in e?e.show_end:function(e){e.tipdiv.style.opacity=1;e.tipdiv.style.display="block"};t.hide_start="hide_start"in e?e.hide_start:function(e){e.tipdiv.style.opacity=0};t.hide_process="hide_process"in e?e.hide_process:undefined;t.hide_end="hide_end"in e?e.hide_end:function(e){e.tipdiv.style.opacity=0;e.tipdiv.style.display="none"};t.show_process_timeout_time=typeof e.show_process_timeout_time!="undefined"?e.show_process_timeout_time:25;t.hide_process_timeout_time=typeof e.hide_process_timeout_time!="undefined"?e.hide_process_timeout_time:25;var i=null;Object.defineProperty(t,"current_target",{get:function(){return i}});var s=t.tipdiv=document.createElement("div");s.style.pointerEvents="none";var o=typeof e.initial_styling!="undefined"?e.initial_styling:function(e){e.style.display="none"};o(s);var u=undefined;var a=null;Object.defineProperty(t,"current_action",{get:function(){return a}});Object.defineProperty(t,"parent",{get:function(){return r},set:function(e){x.disconnect();r.removeEventListener("mousemove",w);if(s.parentNode==r)s.appendChild(e);r=e;r.addEventListener("mousemove",w);T()}});Object.defineProperty(t,"attribute_name",{get:function(){return n},set:function(e){x.disconnect();n=e;T()}});var f=undefined;Object.defineProperty(t,"current_process_callback",{get:function(){return f}});var l=0;Object.defineProperty(t,"current_process_ratio",{get:function(){return l}});var c=typeof e.test_on_init=="undefined"||e.test_on_init==true?true:false;var h=+(new Date)-1e6;var m=t.show_tip=function(e){function p(){t.current_process_timeout=undefined;f=undefined;if(typeof l.show_end!="undefined")l.show_end(t);a=null}if(e instanceof Event==false&&typeof e.x!="undefined"&&typeof e.y!="undefined"&&typeof e.target!="undefined"){var o=e.target}else{var o=e.currentTarget}if(i==o&&a=="show")return;var u=a;a="show";d();var l=o.tiptext_settings;var c=o.getAttribute(n);s.className=l.base_className+(typeof l.className!="undefined"||l.className==""?" "+l.base_className+"-"+l.className:"");s.innerHTML=c;r.appendChild(s);w(e);i=o;if(typeof l.show_start!="undefined")l.show_start(t);if(l.show_delay!=0&&(u==null||+(new Date)-h>=l.stick_delay)){if(typeof l.show_process!="undefined"){v(o,"show",p)}else{t.current_process_timeout=setTimeout(p,l.show_delay)}}else{p()}};var g=t.remove_active_tip=function(){function r(){t.current_process_timeout=undefined;f=undefined;if(s.parentNode==null)return;if(i==null)return;s.parentNode.removeChild(s);i=null;a=null;h=+(new Date);if(typeof n.hide_end!="undefined")n.hide_end(t)}function o(){if(s.parentNode==null)return;if(i==null)return;if(i!=e)return;if(typeof n.hide_process!="undefined"){v(i,"hide",r)}else{t.current_process_timeout=setTimeout(r,n.hide_delay)}}function u(){if(typeof n.hide_start!="undefined")n.hide_start(t);if(n.hide_delay==0){r()}else{o()}}d();if(s.parentNode==null)return;if(i==null)return;a="hide";var e=i;var n=i.tiptext_settings;if(n.stick_delay==0){u()}else{t.current_process_timeout=setTimeout(u,n.stick_delay)}};var b=t.set_active_tiptext=function(e){s.innerHTML=e};r.addEventListener("mousemove",w);t.destroy=function(){x.disconnect();g();r.removeEventListener("mousemove",w)};t.set_tip_settings=function(e,t){if(typeof e.tiptext_settings=="undefined")e.tiptext_settings={};var n=e.tiptext_settings;if(typeof t.base_className!="undefined")n.base_className=t.base_className;if(typeof t.className!="undefined")n.className=t.className;if(typeof t.show_delay!="undefined")n.show_delay=t.show_delay;if(typeof t.hide_delay!="undefined")n.hide_delay=t.hide_delay;if(typeof t.stick_delay!="undefined")n.stick_delay=t.stick_delay;if(typeof t.instant!="undefined")n.show_delay=0;if("show_start"in t)n.show_start=t.show_start;if("show_process"in t)n.show_process=t.show_process;if("show_end"in t)n.show_end=t.show_end;if("hide_start"in t)n.hide_start=t.hide_start;if("hide_process"in t)n.hide_process=t.hide_process;if("hide_end"in t)n.hide_end=t.hide_end;if(typeof t.show_process_interval_time!="undefined")n.show_process_interval_time=t.show_process_interval_time;if(typeof t.hide_process_interval_time!="undefined")n.hide_process_interval_time=t.hide_process_interval_time};var S=window.MutationObserver||window.WebkitMutationObserver;var x=t.observer=new S(function(e){for(var t=0,r=e.length;t<r;t++){var s=e[t];switch(s.type){case"childList":var o=s.addedNodes;for(var u=0,a=o.length;u<a;u++){var f=o[u];if(typeof f.tagName=="undefined")continue;E(f);var l=f.querySelectorAll("*["+n+"]");for(var c=0,h=l.length;c<h;c++){E(l[c])}}if(i!=null){var d=i;while(true){if(d==document.documentElement)break;if(d==null){g(i);break}d=d.parentNode}}break;case"attributes":var f=s.target;if(typeof f.tagName=="undefined")return;var v=f.getAttribute(n);if(v==null||v=="")return;if(typeof f.tiptext_settings=="undefined"||typeof f.tiptext_settings.has_event_listener=="undefined"){p(f)}else{if(i==f)b(v)}break}}});T();return t}
